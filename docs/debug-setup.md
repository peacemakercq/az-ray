# 调试配置说明

## VS Code 调试配置

本项目已配置了完整的VS Code调试环境，包含以下调试配置：

### 调试配置列表

1. **Debug Main Application** - 调试主应用程序
   - 入口点: `__main__.py`
   - 参数: `--verbose`
   - 环境: 加载 `.env` 文件

2. **Debug with Dry Run** - 带Dry Run模式的调试
   - 入口点: `__main__.py`
   - 参数: `--verbose --dry-run`
   - 调试级别日志
   - 不执行实际操作

3. **Debug Tests** - 调试所有测试
   - 运行所有测试并支持断点调试
   - 使用pytest运行器

4. **Debug Current Test File** - 调试当前测试文件
   - 只调试当前打开的测试文件
   - 使用 `${file}` 变量

### 使用方法

1. **启动调试**:
   - 按 `F5` 或使用 `Ctrl+Shift+D` 打开调试面板
   - 选择想要的调试配置
   - 点击绿色播放按钮开始调试

2. **设置断点**:
   - 在代码行号左侧点击设置断点
   - 红色圆点表示断点已设置

3. **调试操作**:
   - `F10`: 单步跳过
   - `F11`: 单步进入
   - `Shift+F11`: 单步跳出
   - `F5`: 继续运行
   - `Shift+F5`: 停止调试

### 任务配置

项目还配置了以下任务（`Ctrl+Shift+P` -> "Tasks: Run Task"）:

- **Run Main Application**: 运行主应用程序
- **Run Tests**: 运行所有测试
- **Run Flake8**: 代码风格检查

### 环境配置

- Python解释器: `/usr/local/bin/python3`
- 测试框架: pytest
- 代码检查: flake8 (最大行长度90)
- 格式化: black (行长度90)
- 环境变量: 自动加载 `.env` 文件

### 调试技巧

1. **异步代码调试**: 
   - 设置 `justMyCode: false` 可以调试第三方库
   - 异步函数中的断点会正常工作

2. **环境变量**: 
   - 确保 `.env` 文件包含必要的配置
   - 调试配置会自动加载环境变量

3. **模块导入**: 
   - `PYTHONPATH` 已正确配置
   - 可以正常导入 `src` 模块

### 常见问题

1. **导入错误**: 确保在项目根目录启动VS Code
2. **环境变量**: 检查 `.env` 文件是否存在且格式正确
3. **权限问题**: 确保对项目目录有读写权限
